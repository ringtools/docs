<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Djuri Baars">
  <link rel="canonical" href="https://docs.rof.tools/web/local-install/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Local Instance - RingTools</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Local Instance";
    var mkdocs_page_input_path = "web/local-install.md";
    var mkdocs_page_url = "/web/local-install/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> RingTools</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">RingTools-CLI</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../ringtools-cli/">Installation and usage</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">RingTools-web</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../../ringtools-web-public/">Public instance</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Local Instance</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#instructions">Instructions</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../ringtools-web-telegram/">Telegram Bot</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Rings of Fire</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../faq/">Frequently asked questions</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Links</span></p>
                <ul>
                    <li class="toctree-l1"><a class="" href="https://github.com/ringtools">GitHub</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="https://rof.tools">Website</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="https://t.me/ringtools_bot">RingTools Telegram Bot</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="https://t.me/ringtools_support">RingTools Telegram Support</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Communities</span></p>
                <ul>
                    <li class="toctree-l1"><a class="" href="https://t.me/satoshiradio">Satoshi Radio</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="https://t.me/SatoshiRadioROF">Satoshi Radio ROF</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="https://t.me/connect_the_world">Connect the World</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">RingTools</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>RingTools-web &raquo;</li>
        
      
    
    <li>Local Instance</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="local-instance">Local Instance</h1>
<p>To use RingTools-web on your own machine, you also need a backend.</p>
<h2 id="instructions">Instructions</h2>
<ol>
<li>Install dependencies with <code>yarn install</code></li>
<li>Configure settings by modifying <code>.env</code></li>
<li>Make sure custom <a href="https://github.com/dsbaars/srrof-lnd-pubsub-python">custom LND PubSub server</a> is running</li>
<li>Start development server with <code>yarn start</code></li>
<li>Navigate to <code>http://localhost:4200/</code></li>
</ol>
<h1 id="umbrel">Umbrel</h1>
<h2 id="required-modification-of-lndconf-when-using-umbrel">Required modification of <code>lnd.conf</code> when using Umbrel</h2>
<p>When using Umbrel, LND is configured to only accept connections of other dockerized applications. This is very secure, but makes it impossible to connect to outside of the Umbrel docker network.</p>
<p>To use this web-application using <a href="https://github.com/dsbaars/srrof-lnd-pubsub-python">dsbaars/srrof-lnd-pubsub-python</a> you need to reconfigure your LND instance so it will accept connections from your LAN. Alternatively you could add the <a href="https://github.com/dsbaars/srrof-lnd-pubsub-python">LND PubSub Server</a> to the existing Umbrel network but that is likely to break when you are updating Umbrel.</p>
<p><strong>Warning</strong>: Although in my opinion this is a safe modification, do not trust me blindly. Please understand the basics of what the effects of this modification are. Proceed at your own risk.</p>
<p>The <a href="https://api.lightning.community/#lnd-grpc-api-reference">LND gRPC API Reference</a> and the <a href="https://github.com/lightningnetwork/lnd/blob/master/docs/grpc/python.md#imports-and-client">Imports and Client section of the Python information</a> should help you understand.</p>
<blockquote>
<p>At the time of writing this documentation, two things are needed in order to make a gRPC request to an lnd instance: a TLS/SSL connection and a macaroon used for RPC authentication. </p>
<p>Note that when an IP address is used to connect to the node (e.g. 192.168.1.21 instead of localhost) you need to add <code>--tlsextraip=192.168.1.21</code> to your <code>lnd</code> configuration and re-generate the certificate (delete tls.cert and tls.key and restart lnd).</p>
</blockquote>
<p>What you are doing will regenerate your TLS certificates so it will include the IP-address and the hostname of your umbrel node.</p>
<p><strong>Important</strong>: Although both the certificate and the private key are regenerated, you only need the certificate itself. If you are going to run the PubSub server externally, you only need to copy <code>tls.cert</code> and the <code>readonly.macaroon</code>. </p>
<h3 id="instructions_1">Instructions</h3>
<p><strong>Note</strong>: You will have to restart LND to apply the changes.</p>
<ol>
<li>Make a backup of your <code>lnd.conf</code></li>
<li><code>cd ~/umbrel/lnd</code></li>
<li>
<p><code>cp lnd.conf lnd.conf.bak</code></p>
</li>
<li>
<p>Open the text editor (e.g. <code>nano ~/umbrel/lnd/lnd.conf</code> of your choice and add <code>tlsextraip=&lt;your ip&gt;</code> below the existing <code>tlsextraip=</code> line.</p>
</li>
<li>
<p>Just below the new entry, add another <code>tlsextradomain=</code> entry so it contains two entries in total:</p>
</li>
</ol>
<pre><code>tlsextradomain=umbrel.local
tlsextradomain=umbrel
</code></pre>
<ol>
<li>
<p>Save and close the text editor</p>
</li>
<li>
<p>Restart lnd</p>
</li>
<li><code>cd ~/umbrel</code></li>
<li>
<p><code>docker-compose restart lnd</code></p>
</li>
<li>
<p>Wait until your node comes up again and that Umbrel still works, if not copy back the backpu config file and try again. </p>
</li>
</ol>
<p>You can verify that multiple <code>tlsextraip</code> and <code>tlsextradomain</code> are allowed at <a href="https://github.com/lightningnetwork/lnd/blob/master/sample-lnd.conf#L44">Line 44 of the sample config</a>.</p>
<p>Also you can read that <code>tlsautorefresh=1</code> automatically regenerates the necessary files, so although stated in their own guide, no deletion is required.
You might need to restart other Umbrel services since the TLS certificate is probably used by other Umbrel apps as well.</p>
              
            </div>
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../ringtools-web-public/" class="btn btn-neutral float-left"
            title="Public instance"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../ringtools-web-telegram/" class="btn btn-neutral float-right" title="Telegram Bot">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

    <hr />

    <div role="contentinfo">
        <!-- Copyright etc -->
    </div>

    
    Built with <a href="https://www.mkdocs.org/">MkDocs</a>.
    

</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../ringtools-web-public/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../ringtools-web-telegram/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
